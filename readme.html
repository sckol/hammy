<!DOCTYPE html> <html><head>
		<title>README</title>
		<base href="./">
		<meta id="root-path" root-path="./">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=1.0, maximum-scale=5.0">
		<meta charset="UTF-8">
		<meta name="description" content="hammy - README">
		<meta property="og:title" content="README">
		<meta property="og:description" content="hammy - README">
		<meta property="og:type" content="website">
		<meta property="og:url" content="readme.html">
		<meta property="og:image" content="undefined">
		<meta property="og:site_name" content="hammy">
		<link rel="alternate" type="application/rss+xml" title="RSS Feed" href="lib/rss.xml"><script async="" id="webpage-script" src="lib/scripts/webpage.js" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;)"></script><script type="module" async="" id="graph-view-script" src="lib/scripts/graph-view.js"></script><script async="" id="graph-wasm-script" src="lib/scripts/graph-wasm.js" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;)"></script><script async="" id="graph-render-worker-script" src="lib/scripts/graph-render-worker.js" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;)"></script><script async="" id="tinycolor-script" src="lib/scripts/tinycolor.js" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;)"></script><script async="" id="pixi-script" src="https://cdnjs.cloudflare.com/ajax/libs/pixi.js/7.4.0/pixi.min.js" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;)"></script><script async="" id="minisearch-script" src="https://cdn.jsdelivr.net/npm/minisearch@6.3.0/dist/umd/index.min.js" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;)"></script><link rel="icon" href="lib/media/favicon.png"><script async="" id="graph-data-script" src="lib/scripts/graph-data.js" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;)"></script><style>body{--line-width:40em;--line-width-adaptive:40em;--file-line-width:40em;--sidebar-width:min(20em, 80vw);--collapse-arrow-size:11px;--tree-horizontal-spacing:0.6em;--tree-vertical-spacing:0.6em;--sidebar-margin:12px}.sidebar{height:100%;min-width:calc(var(--sidebar-width) + var(--divider-width-hover));max-width:calc(var(--sidebar-width) + var(--divider-width-hover));font-size:14px;z-index:10;position:relative;overflow:hidden;transition:min-width ease-in-out,max-width ease-in-out;transition-duration:.2s;contain:size}.sidebar-left{left:0}.sidebar-right{right:0}.sidebar.is-collapsed{min-width:0;max-width:0}body.floating-sidebars .sidebar{position:absolute}.sidebar-content{height:100%;min-width:calc(var(--sidebar-width) - var(--divider-width-hover));top:0;padding:var(--sidebar-margin);padding-top:4em;line-height:var(--line-height-tight);background-color:var(--background-secondary);transition:background-color,border-right,border-left,box-shadow;transition-duration:var(--color-fade-speed);transition-timing-function:ease-in-out;position:absolute;display:flex;flex-direction:column}.sidebar:not(.is-collapsed) .sidebar-content{min-width:calc(max(100%,var(--sidebar-width)) - 3px);max-width:calc(max(100%,var(--sidebar-width)) - 3px)}.sidebar-left .sidebar-content{left:0;border-top-right-radius:var(--radius-l);border-bottom-right-radius:var(--radius-l)}.sidebar-right .sidebar-content{right:0;border-top-left-radius:var(--radius-l);border-bottom-left-radius:var(--radius-l)}.sidebar:has(.sidebar-content:empty):has(.topbar-content:empty){display:none}.sidebar-topbar{height:2em;width:var(--sidebar-width);top:var(--sidebar-margin);padding-inline:var(--sidebar-margin);z-index:1;position:fixed;display:flex;align-items:center;transition:width ease-in-out;transition-duration:inherit}.sidebar.is-collapsed .sidebar-topbar{width:calc(2.3em + var(--sidebar-margin) * 2)}.sidebar .sidebar-topbar.is-collapsed{width:0}.sidebar-left .sidebar-topbar{left:0}.sidebar-right .sidebar-topbar{right:0}.topbar-content{overflow:hidden;overflow:clip;width:100%;height:100%;display:flex;align-items:center;transition:inherit}.sidebar.is-collapsed .topbar-content{width:0;transition:inherit}.clickable-icon.sidebar-collapse-icon{background-color:transparent;color:var(--icon-color-focused);padding:0!important;margin:0!important;height:100%!important;width:2.3em!important;margin-inline:0.14em!important;position:absolute}.sidebar-left .clickable-icon.sidebar-collapse-icon{transform:rotateY(180deg);right:var(--sidebar-margin)}.sidebar-right .clickable-icon.sidebar-collapse-icon{transform:rotateY(180deg);left:var(--sidebar-margin)}.clickable-icon.sidebar-collapse-icon svg.svg-icon{width:100%;height:100%}.sidebar-section-header{margin:0 0 1em 0;text-transform:uppercase;letter-spacing:.06em;font-weight:600}body{transition:background-color var(--color-fade-speed) ease-in-out}.webpage-container{display:flex;flex-direction:row;height:100%;width:100%;align-items:stretch;justify-content:center}.document-container{opacity:1;flex-basis:100%;max-width:100%;width:100%;height:100%;display:flex;flex-direction:column;align-items:center;transition:opacity .2s ease-in-out;contain:inline-size}.hide{opacity:0;transition:opacity .2s ease-in-out}.document-container>.markdown-preview-view{margin:var(--sidebar-margin);margin-bottom:0;width:100%;width:-webkit-fill-available;width:-moz-available;width:fill-available;background-color:var(--background-primary);transition:background-color var(--color-fade-speed) ease-in-out;border-top-right-radius:var(--window-radius,var(--radius-m));border-top-left-radius:var(--window-radius,var(--radius-m));overflow-x:hidden!important;overflow-y:auto!important;display:flex!important;flex-direction:column!important;align-items:center!important;contain:inline-size}.document-container>.markdown-preview-view>.markdown-preview-sizer{padding-bottom:80vh!important;width:100%!important;max-width:var(--line-width)!important;flex-basis:var(--line-width)!important;transition:background-color var(--color-fade-speed) ease-in-out;contain:inline-size}.markdown-rendered img:not([width]),.view-content img:not([width]){max-width:100%;outline:0}.document-container>.view-content.embed{display:flex;padding:1em;height:100%;width:100%;align-items:center;justify-content:center}.document-container>.view-content.embed>*{max-width:100%;max-height:100%;object-fit:contain}:has(> :is(.math,table)){overflow-x:auto!important}.document-container>.view-content{overflow-x:auto;contain:content;padding:0;margin:0;height:100%}.scroll-highlight{position:absolute;width:100%;height:100%;pointer-events:none;z-index:1000;background-color:hsla(var(--color-accent-hsl),.25);opacity:0;padding:1em;inset:50%;translate:-50% -50%;border-radius:var(--radius-s)}</style><script defer="">async function loadIncludes(){if("file:"!=location.protocol){let e=document.querySelectorAll("include");for(let t=0;t<e.length;t++){let o=e[t],l=o.getAttribute("src");try{const e=await fetch(l);if(!e.ok){console.log("Could not include file: "+l),o?.remove();continue}let t=await e.text(),n=document.createRange().createContextualFragment(t),i=Array.from(n.children);for(let e of i)e.classList.add("hide"),e.style.transition="opacity 0.5s ease-in-out",setTimeout((()=>{e.classList.remove("hide")}),10);o.before(n),o.remove(),console.log("Included file: "+l)}catch(e){o?.remove(),console.log("Could not include file: "+l,e);continue}}}else{if(document.querySelectorAll("include").length>0){var e=document.createElement("div");e.id="error",e.textContent="Web server exports must be hosted on an http / web server to be viewed correctly.",e.style.position="fixed",e.style.top="50%",e.style.left="50%",e.style.transform="translate(-50%, -50%)",e.style.fontSize="1.5em",e.style.fontWeight="bold",e.style.textAlign="center",document.body.appendChild(e),document.querySelector(".document-container")?.classList.remove("hide")}}}document.addEventListener("DOMContentLoaded",(()=>{loadIncludes()}));let isFileProtocol="file:"==location.protocol;function waitLoadScripts(e,t){let o=e.map((e=>document.getElementById(e+"-script"))),l=0;!function e(){let n=o[l];l++,n&&"true"!=n.getAttribute("loaded")||l<o.length&&e(),l<o.length?n.addEventListener("load",e):t()}()}</script><link rel="stylesheet" href="lib/styles/obsidian.css"><link rel="preload" href="lib/styles/global-variable-styles.css" as="style" onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel="stylesheet" href="lib/styles/global-variable-styles.css"></noscript><link rel="preload" href="lib/styles/main-styles.css" as="style" onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel="stylesheet" href="lib/styles/main-styles.css"></noscript></head><body class="publish css-settings-manager theme-light show-inline-title show-ribbon"><script defer="">let theme=localStorage.getItem("theme")||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light");"dark"==theme?(document.body.classList.add("theme-dark"),document.body.classList.remove("theme-light")):(document.body.classList.add("theme-light"),document.body.classList.remove("theme-dark")),window.innerWidth<480?document.body.classList.add("is-phone"):window.innerWidth<768?document.body.classList.add("is-tablet"):window.innerWidth<1024?document.body.classList.add("is-small-screen"):document.body.classList.add("is-large-screen")</script><div class="webpage-container workspace"><div class="sidebar-left sidebar"><div class="sidebar-handle"></div><div class="sidebar-topbar"><div class="topbar-content"><label class="theme-toggle-container" for="theme_toggle"><input class="theme-toggle-input" type="checkbox" id="theme_toggle"><div class="toggle-background"></div></label></div><div class="clickable-icon sidebar-collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" class="svg-icon"><path d="M21 3H3C1.89543 3 1 3.89543 1 5V19C1 20.1046 1.89543 21 3 21H21C22.1046 21 23 20.1046 23 19V5C23 3.89543 22.1046 3 21 3Z"></path><path d="M10 4V20"></path><path d="M4 7H7"></path><path d="M4 10H7"></path><path d="M4 13H7"></path></svg></div></div><div class="sidebar-content"><div class="search-input-container"><input enterkeyhint="search" type="search" spellcheck="false" placeholder="Search..."><div class="search-input-clear-button" aria-label="Clear search"></div></div><include src="lib/html/file-tree.html"></include></div><script defer="">let ls = document.querySelector(".sidebar-left"); ls.classList.add("is-collapsed"); if (window.innerWidth > 768) ls.classList.remove("is-collapsed"); ls.style.setProperty("--sidebar-width", localStorage.getItem("sidebar-left-width"));</script></div><div class="document-container markdown-reading-view hide"><div class="markdown-preview-view markdown-rendered allow-fold-headings allow-fold-lists is-readable-line-width"><style id="MJX-CHTML-styles"></style><div class="markdown-preview-sizer markdown-preview-section"><h1 class="page-title heading inline-title" id="hammy: Main page">hammy: Main page</h1><div class="el-h1 heading-wrapper"><div class="heading-children"></div></div><div class="el-h1 heading-wrapper"><h1 data-heading="Overview" dir="auto" class="heading" id="Overview">Overview</h1><div class="heading-children"><div class="el-p"><p dir="auto">Consider a graph where we perform a random walk with a fixed number of steps from a starting node <code>S</code>. We keep only those walks that end at a particular point <code>E</code>. We can then define a “trajectory” by identifying the most frequently visited node at each intermediate step. The aim of this project is to show that such a trajectory exhibits “physical” behavior. For example, on an infinite 1D/2D/3D lattice graph, the trajectory would correspond to a discrete version of uniform motion between <code>S</code> and <code>E</code>. We can introduce “potential energy” by terminating the random walk at each step with a probability based on the potential energy of the particle's location. In this scenario, the trajectory would show the particle slowing down in areas of high potential energy and accelerating in areas of low potential energy.</p></div><div class="el-p"><p dir="auto">The <strong>hammy</strong> project aims to demonstrate these concepts and explore the correspondence between physical notions and statistics of random walks, including:</p></div><div class="el-ul"><ul>
<li data-line="0" dir="auto">Lagrangian,</li>
<li data-line="1" dir="auto">continuous position on a discrete graph,</li>
<li data-line="2" dir="auto">momentum and energy,</li>
<li data-line="3" dir="auto">Hamiltonian function.</li>
</ul></div></div></div><div class="el-h1 heading-wrapper"><h1 data-heading="Structure" dir="auto" class="heading" id="Structure">Structure</h1><div class="heading-children"><div class="el-p"><p dir="auto"><strong>hammy</strong> consists of a series of experiments, each running simulations of random walks, calculating their statistics, and interpreting them in physical terms. These experiments are conducted in Jupyter Notebooks. Some experiments require substantial computational resources (memory, CPUs, and GPUs), so utilities were developed to facilitate running experiments in a cloud environment efficiently and cost-effectively.</p></div><div class="el-p"><p dir="auto">Code for experiments and utilities is <a data-tooltip-position="top" aria-label="https://github.com/sckol/hammy" rel="noopener nofollow" class="external-link" href="https://github.com/sckol/hammy" target="_blank">available on GitHub</a>.</p></div><div class="el-h2 heading-wrapper"><h2 data-heading="Experiments" dir="auto" class="heading" id="Experiments"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>Experiments</h2><div class="heading-children"><div class="el-p"><p dir="auto">Random walk simulations are prone to bugs, some of which are difficult to detect. To ensure reliability, the simulations are implemented in both Python and C. During development, it's more convenient to use CPUs to run the code. However, as experiments often require many iterations to achieve more accurate results, GPUs are used for final runs. For Python code, the <a data-tooltip-position="top" aria-label="https://cupy.dev/" rel="noopener nofollow" class="external-link" href="https://cupy.dev/" target="_blank">CuPy</a> library allows to write code that runs that runs on both CPUs and GPUs. For the C implementation, a simple framework of macros and code-writing rules has been developed, allowing the use of a single source for both CPU and GPU execution.</p></div><div class="el-p"><p dir="auto">We keep separate datasets of simulation results for:</p></div><div class="el-ul"><ul>
<li data-line="0" dir="auto">Python implementations on CPU and GPU,</li>
<li data-line="1" dir="auto">C implementation on CPU,</li>
<li data-line="2" dir="auto">C implementation on GPU,</li>
<li data-line="3" dir="auto">aggregated data across all implementations.</li>
</ul></div><div class="el-p"><p dir="auto">Hypotheses are tested on the different datasets to identify any discrepancies (which may indicate bugs) and finally on the aggregated data.</p></div></div></div><div class="el-h2 heading-wrapper"><h2 data-heading="Utilities" dir="auto" class="heading" id="Utilities"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>Utilities</h2><div class="heading-children"><div class="el-p"><p dir="auto">The <code>docker</code> folder contains files for running experiments in Yandex Cloud using <a data-tooltip-position="top" aria-label="https://yandex.cloud/en/docs/cos/" rel="noopener nofollow" class="external-link" href="https://yandex.cloud/en/docs/cos/" target="_blank">Container Solution</a>. The `hammy-base.Dockerfile' is an image with the following features</p></div><div class="el-ul"><ul>
<li data-line="0" dir="auto">Python is installed with CuPy</li>
<li data-line="1" dir="auto">Yandex Cloud Monitoring is enabled, which allows you to monitor CPU and memory usage in real time.</li>
<li data-line="2" dir="auto">the logs of the main script (which must be named as <code>main.sh</code> in the descendant images) are redirected to Yandex Cloud Logging using the <code>log_yc</code> bash function</li>
<li data-line="3" dir="auto">The main script is executed in a wrapper <code>hammy_entrypoint.sh</code>, which at the end of the main script's execution either deletes the machine (default) or shuts it down (do-nothing option is also available).</li>
<li data-line="4" dir="auto">A <code>run_nice</code> bash function is available which sets a lower priority for the main script, to ensure that the monitoring and wrapper processes continue to work even if the main script exhausts memory or CPU.</li>
</ul></div><div class="el-p"><p dir="auto">An example of a <code>hammy-base</code> descendant image is in <code>chquery.Dockerfile</code>. It runs a Clickhouse instance connected to Yandex Cloud Storage as an S3 bucker, and passes a query from the container's <code>CMD</code> argument (allowing different queries to be run using the same image). Clickhouse can take the data from the S3 bucker and return query results to it. This allows Clickhouse to be used as part of a data processing pipeline. The script <code>create_query_machine.sh</code> runs a virtual machine in Yandex Cloud with this image and passes the content of the given file as <code>CMD</code> argument.</p></div><div class="el-p"><p dir="auto">Sometimes when writing queries you may want to use variable substitution or cycles (for example, if you have a table with many columns <code>position_1</code>, <code>position_2</code>, ...). The <code>process_jinja.py</code> script allows you to write queries as <a data-tooltip-position="top" aria-label="https://jinja.palletsprojects.com/" rel="noopener nofollow" class="external-link" href="https://jinja.palletsprojects.com/" target="_blank">Jinja</a> templates and the script will convert them into regular SQL files.</p></div><div class="el-p"><p dir="auto">The <code>create_hammy_machine.sh</code> starts a virtual machine with GPU support from a Docker image for the given experiment name.</p></div></div></div></div></div><div class="el-h1 heading-wrapper"><h1 data-heading="Experiment list" dir="auto" class="heading" id="Experiment_list">Experiment list</h1><div class="heading-children"><div class="el-h2 heading-wrapper"><h2 data-heading="Naming conventions" dir="auto" class="heading" id="Naming_conventions"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>Naming conventions</h2><div class="heading-children"><div class="mod-footer mod-ui"></div></div></div></div></div></div></div></div><div class="sidebar-right sidebar"><div class="sidebar-handle"></div><div class="sidebar-topbar"><div class="topbar-content"></div><div class="clickable-icon sidebar-collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" class="svg-icon"><path d="M21 3H3C1.89543 3 1 3.89543 1 5V19C1 20.1046 1.89543 21 3 21H21C22.1046 21 23 20.1046 23 19V5C23 3.89543 22.1046 3 21 3Z"></path><path d="M10 4V20"></path><path d="M4 7H7"></path><path d="M4 10H7"></path><path d="M4 13H7"></path></svg></div></div><div class="sidebar-content"><div class="graph-view-wrapper"><div class="sidebar-section-header">Interactive Graph</div><div class="graph-view-placeholder">
		<div class="graph-view-container">
			<div class="graph-icon graph-expand" role="button" aria-label="Expand" data-tooltip-position="top"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon"><line x1="7" y1="17" x2="17" y2="7"></line><polyline points="7 7 17 7 17 17"></polyline></svg></div>
			<canvas id="graph-canvas" class="hide" width="512px" height="512px"></canvas>
		</div>
		</div></div><div class="tree-container mod-root nav-folder tree-item outline-tree" data-depth="0"><div class="tree-header"><span class="sidebar-section-header">Table Of Contents</span><button class="clickable-icon collapse-tree-button" aria-label="Collapse All"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></svg></button></div><div class="tree-scroll-area tree-item-children nav-folder-children"><div class="tree-item mod-tree-folder nav-folder mod-collapsible is-collapsed" style="display: none;"></div><div class="tree-item" data-depth="1"><a class="tree-link" href="readme.html#hammy: Main page"><div class="tree-item-contents heading-link" heading-name="hammy: Main page"><span class="tree-item-title">hammy: Main page</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="1"><a class="tree-link" href="readme.html#Overview"><div class="tree-item-contents heading-link" heading-name="Overview"><span class="tree-item-title">Overview</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="1"><a class="tree-link" href="readme.html#Structure"><div class="tree-item-contents heading-link" heading-name="Structure"><span class="tree-item-title">Structure</span></div></a><div class="tree-item-children nav-folder-children"><div class="tree-item" data-depth="2"><a class="tree-link" href="readme.html#Experiments"><div class="tree-item-contents heading-link" heading-name="Experiments"><span class="tree-item-title">Experiments</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="2"><a class="tree-link" href="readme.html#Utilities"><div class="tree-item-contents heading-link" heading-name="Utilities"><span class="tree-item-title">Utilities</span></div></a><div class="tree-item-children nav-folder-children"></div></div></div></div><div class="tree-item" data-depth="1"><a class="tree-link" href="readme.html#Experiment_list"><div class="tree-item-contents heading-link" heading-name="Experiment list"><span class="tree-item-title">Experiment list</span></div></a><div class="tree-item-children nav-folder-children"><div class="tree-item" data-depth="2"><a class="tree-link" href="readme.html#Naming_conventions"><div class="tree-item-contents heading-link" heading-name="Naming conventions"><span class="tree-item-title">Naming conventions</span></div></a><div class="tree-item-children nav-folder-children"></div></div></div></div></div></div></div><script defer="">let rs = document.querySelector(".sidebar-right"); rs.classList.add("is-collapsed"); if (window.innerWidth > 768) rs.classList.remove("is-collapsed"); rs.style.setProperty("--sidebar-width", localStorage.getItem("sidebar-right-width"));</script></div></div></body></html>